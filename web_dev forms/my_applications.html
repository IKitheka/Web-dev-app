<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Intern Connect | My Applications</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <!-- Background -->
  <svg class="bg-animation" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
    <path fill="url(#aurora-gradient)" d="M0,128L60,138.7C120,149,240,171,360,154.7C480,139,600,85,720,96C840,107,960,181,1080,197.3C1200,213,1320,171,1380,149.3L1440,128L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"></path>
    <defs>
      <linearGradient id="aurora-gradient" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#4f46e5"/>
        <stop offset="50%" stop-color="#06b6d4"/>
        <stop offset="100%" stop-color="#8b5cf6"/>
      </linearGradient>
    </defs>
  </svg>

  <header class="header">MY APPLICATIONS</header>

  <nav class="nav">
    <a href="#">INTERN CONNECT</a>
    <a href="#">Dashboard</a>
    <a href="#">Post a Job</a>
    <a href="#">Manage Listings</a>
    <a class="active" href="#">My Applications</a>
    <a href="#">Profile</a>
    <a href="#" style="margin-left: auto;">Log out</a>
  </nav>

  <div class="content">
    <h1 class="welcome">Your Internship Listings</h1>

    <div id="successMessage" class="success-message"></div>
    <div id="errorMessage" class="error-message"></div>

    <div class="table-section">
      <table class="apps-table">
        <thead>
          <tr>
            <th>Title</th>
            <th>Location</th>
            <th>Duration</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="listingsTable">
          <tr data-id="1">
            <td class="title">UI/UX Designer</td>
            <td class="location">Remote</td>
            <td class="duration">3 months</td>
            <td class="start">01/06/2025</td>
            <td class="end">31/08/2025</td>
            <td class="status"><span class="status-active">Approved</span></td>
            <td>
              <button class="btn edit-btn" onclick="editListing(1)">Edit</button>
              <button class="btn btn-danger withdraw-btn" onclick="withdrawListing(1)">Withdraw</button>
            </td>
          </tr>
          <tr data-id="2">
            <td class="title">Software Engineer Intern</td>
            <td class="location">Nairobi</td>
            <td class="duration">6 months</td>
            <td class="start">01/05/2025</td>
            <td class="end">01/11/2025</td>
            <td class="status"><span class="status-active">Pending</span></td>
            <td>
              <button class="btn edit-btn" onclick="editListing(2)">Edit</button>
              <button class="btn btn-danger withdraw-btn" onclick="withdrawListing(2)">Withdraw</button>
            </td>
          </tr>
          <tr data-id="3">
            <td class="title">Marketing Intern</td>
            <td class="location">Mombasa</td>
            <td class="duration">4 months</td>
            <td class="start">15/06/2025</td>
            <td class="end">15/10/2025</td>
            <td class="status"><span class="status-active">Rejected</span></td>
            <td>
              <button class="btn edit-btn" onclick="editListing(3)">Edit</button>
              <button class="btn btn-danger withdraw-btn" onclick="withdrawListing(3)">Withdraw</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Edit Modal -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeEditModal()">&times;</span>
      <h2>Edit Application</h2>
      <form id="editForm">
        <input type="hidden" id="editId">
        <input type="text" id="editTitle" class="form-input" placeholder="Title" required>
        <input type="text" id="editLocation" class="form-input" placeholder="Location" required>
        <input type="text" id="editDuration" class="form-input" placeholder="Duration" required>
        <input type="date" id="editStart" class="form-input" required>
        <input type="date" id="editEnd" class="form-input" required>
        <div class="form-actions">
          <button type="submit" class="btn btn-submit">Save</button>
          <button type="button" class="btn btn-cancel" onclick="closeEditModal()">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <footer class="footer">Intern Connect &copy; 2025 | All Rights Reserved</footer>

  <script>
    function editListing(id) {
      const row = document.querySelector(`tr[data-id='${id}']`);
      document.getElementById("editId").value = id;
      document.getElementById("editTitle").value = row.querySelector(".title").textContent;
      document.getElementById("editLocation").value = row.querySelector(".location").textContent;
      document.getElementById("editDuration").value = row.querySelector(".duration").textContent;
      document.getElementById("editStart").value = formatDateForInput(row.querySelector(".start").textContent);
      document.getElementById("editEnd").value = formatDateForInput(row.querySelector(".end").textContent);
      document.getElementById("editModal").style.display = "block";
    }

    function withdrawListing(id) {
      if (confirm("Are you sure you want to withdraw this application?")) {
        const row = document.querySelector(`tr[data-id='${id}']`);
        row.remove();
        document.getElementById("successMessage").textContent = "Application withdrawn successfully.";
      }
    }

    function closeEditModal() {
      document.getElementById("editModal").style.display = "none";
    }

    document.getElementById("editForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const id = document.getElementById("editId").value;
      const row = document.querySelector(`tr[data-id='${id}']`);
      row.querySelector(".title").textContent = document.getElementById("editTitle").value;
      row.querySelector(".location").textContent = document.getElementById("editLocation").value;
      row.querySelector(".duration").textContent = document.getElementById("editDuration").value;
      row.querySelector(".start").textContent = formatDateForDisplay(document.getElementById("editStart").value);
      row.querySelector(".end").textContent = formatDateForDisplay(document.getElementById("editEnd").value);
      closeEditModal();
      document.getElementById("successMessage").textContent = "Application updated successfully.";
    });

    function formatDateForInput(dateStr) {
      const [day, month, year] = dateStr.split('/');
      return `${year}-${month}-${day}`;
    }

    function formatDateForDisplay(dateStr) {
      const [year, month, day] = dateStr.split('-');
      return `${day}/${month}/${year}`;
    }

    window.onclick = function (event) {
      const modal = document.getElementById("editModal");
      if (event.target === modal) {
        closeEditModal();
      }
    }
  </script>
</body>
</html>