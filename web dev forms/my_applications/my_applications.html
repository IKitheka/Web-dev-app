<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Intern Connect | Manage Listings</title>
<link rel="stylesheet" href="my_applications.css">
</head>
<body>
<svg class="bg-animation" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
<path fill="url(#aurora-gradient)" d="M0,128L60,138.7C120,149,240,171,360,154.7C480,139,600,85,720,96C840,107,960,181,1080,197.3C1200,213,1320,171,1380,149.3L1440,128L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"></path>
<defs>
<linearGradient id="aurora-gradient" x1="0" y1="0" x2="1" y2="1">
<stop offset="0%" stop-color="#4f46e5"/>
<stop offset="50%" stop-color="#06b6d4"/>
<stop offset="100%" stop-color="#8b5cf6"/>
</linearGradient>
</defs>
</svg>

<header class="header">MANAGE LISTINGS</header>

<nav class="nav">
<a href="#">INTERN CONNECT</a>
<a href="#">Dashboard</a>
<a href="#">Post a Job</a>
<a class="active" href="#">Manage Listings</a>
<a href="#">Applicants</a>
<a href="#">Profile</a>
<a href="#" style="margin-left: auto;">Log out</a>
</nav>

<div class="content">
<h1 class="welcome">Your Internship Listings</h1>

<div id="successMessage" class="success-message"></div>
<div id="errorMessage" class="error-message"></div>

<div class="table-section">
<table class="apps-table">
<thead>
<tr>
<th>Title</th>
<th>Location</th>
<th>Duration</th>
<th>Start Date</th>
<th>End Date</th>
<th>Status</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="listingsTable">
<tr data-id="1">
<td>UI/UX Designer</td>
<td>Remote</td>
<td>3 months</td>
<td>01/06/2025</td>
<td>31/08/2025</td>
<td><span class="status-active">Approved</span></td>
<td>
<button class="btn edit-btn" onclick="editListing(1)">Edit</button>
<button class="btn btn-danger withdraw-btn" onclick="withdrawListing(1)">Withdraw</button>
</td>
</tr>
<tr data-id="2">
<td>Software Engineer Intern</td>
<td>Nairobi</td>
<td>6 months</td>
<td>01/05/2025</td>
<td>01/11/2025</td>
<td><span class="status-active">Pending</span></td>
<td>
<button class="btn edit-btn" onclick="editListing(2)">Edit</button>
<button class="btn btn-danger withdraw-btn" onclick="withdrawListing(2)">Withdraw</button>
</td>
</tr>
<tr data-id="3">
<td>Marketing Intern</td>
<td>Mombasa</td>
<td>4 months</td>
<td>15/06/2025</td>
<td>15/10/2025</td>
<td><span class="status-active">Rejected</span></td>
<td>
<button class="btn edit-btn" onclick="editListing(3)">Edit</button>
<button class="btn btn-danger withdraw-btn" onclick="withdrawListing(3)">Withdraw</button>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<!-- Edit Modal -->
<div id="editModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closeModal()">&times;</span>
<h2 style="color: var(--color-white); margin-bottom: 2rem;">Edit Internship Listing</h2>
<form id="editForm">
<div class="form-group">
<label class="form-label" for="editTitle">Job Title</label>
<input type="text" id="editTitle" class="form-input" required>
</div>
<div class="form-group">
<label class="form-label" for="editLocation">Location</label>
<input type="text" id="editLocation" class="form-input" required>
</div>
<div class="form-group">
<label class="form-label" for="editDuration">Duration</label>
<input type="text" id="editDuration" class="form-input" required>
</div>
<div class="form-group">
<label class="form-label" for="editStartDate">Start Date</label>
<input type="date" id="editStartDate" class="form-input" required>
</div>
<div class="form-group">
<label class="form-label" for="editEndDate">End Date</label>
<input type="date" id="editEndDate" class="form-input" required>
</div>
<div class="form-group">
<label class="form-label" for="editDescription">Description</label>
<textarea id="editDescription" class="form-textarea" rows="4" placeholder="Job description..."></textarea>
</div>
<div class="form-group">
<button type="submit" class="btn">Update Listing</button>
<button type="button" class="btn btn-danger" onclick="closeModal()">Cancel</button>
</div>
</form>
</div>
</div>

<footer class="footer">Intern Connect &copy; 2025 | All Rights Reserved</footer>

<script>
// Sample listings data (in a real app, this would come from a backend)
let listings = [
    {
        id: 1,
        title: "UI/UX Designer",
        location: "Remote",
        duration: "3 months",
        startDate: "2025-06-01",
        endDate: "2025-08-31",
        description: "Looking for a creative UI/UX designer to join our team for a 3-month internship program.",
        status: "Approved"
    },
    {
        id: 2,
        title: "Software Engineer Intern",
        location: "Nairobi",
        duration: "6 months",
        startDate: "2025-05-01",
        endDate: "2025-11-01",
        description: "Software engineering internship focusing on web development and cloud technologies.",
        status: "Pending"
    },
    {
        id: 3,
        title: "Marketing Intern",
        location: "Mombasa",
        duration: "4 months",
        startDate: "2025-06-15",
        endDate: "2025-10-15",
        description: "Marketing internship with focus on digital marketing and social media campaigns.",
        status: "Rejected"
    }
];

let currentEditingId = null;

function showMessage(message, isSuccess = true) {
    const successDiv = document.getElementById('successMessage');
    const errorDiv = document.getElementById('errorMessage');
    
    if (isSuccess) {
        successDiv.textContent = message;
        successDiv.style.display = 'block';
        errorDiv.style.display = 'none';
    } else {
        errorDiv.textContent = message;
        errorDiv.style.display = 'block';
        successDiv.style.display = 'none';
    }
    
    // Hide message after 5 seconds
    setTimeout(() => {
        successDiv.style.display = 'none';
        errorDiv.style.display = 'none';
    }, 5000);
}

function formatDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-GB', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'
    });
}

function editListing(id) {
    const listing = listings.find(l => l.id === id);
    if (!listing) {
        showMessage('Listing not found!', false);
        return;
    }
    
    currentEditingId = id;
    
    // Populate form fields
    document.getElementById('editTitle').value = listing.title;
    document.getElementById('editLocation').value = listing.location;
    document.getElementById('editDuration').value = listing.duration;
    document.getElementById('editStartDate').value = listing.startDate;
    document.getElementById('editEndDate').value = listing.endDate;
    document.getElementById('editDescription').value = listing.description || '';
    
    // Show modal
    document.getElementById('editModal').style.display = 'block';
}

function withdrawListing(id) {
    if (confirm('Are you sure you want to withdraw this listing? This action cannot be undone.')) {
        const listingIndex = listings.findIndex(l => l.id === id);
        if (listingIndex === -1) {
            showMessage('Listing not found!', false);
            return;
        }
        
        // Update status to withdrawn
        listings[listingIndex].status = 'Withdrawn';
        
        // Update the table row
        const row = document.querySelector(`tr[data-id="${id}"]`);
        if (row) {
            const statusCell = row.cells[5];
            statusCell.innerHTML = '<span class="status-withdrawn" style="background: rgba(107, 114, 128, 0.2); color: #6b7280; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.875rem; font-weight: 600; border: 1px solid rgba(107, 114, 128, 0.3);">Withdrawn</span>';
            
            // Disable buttons
            const actionCell = row.cells[6];
            actionCell.innerHTML = '<span style="color: rgba(255, 255, 255, 0.5); font-size: 0.9rem;">Withdrawn</span>';
        }
        
        showMessage('Listing has been successfully withdrawn.');
    }
}

function closeModal() {
    document.getElementById('editModal').style.display = 'none';
    currentEditingId = null;
}

// Handle form submission
document.getElementById('editForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    if (!currentEditingId) {
        showMessage('No listing selected for editing!', false);
        return;
    }
    
    const listingIndex = listings.findIndex(l => l.id === currentEditingId);
    if (listingIndex === -1) {
        showMessage('Listing not found!', false);
        return;
    }
    
    // Get form data
    const formData = {
        title: document.getElementById('editTitle').value,
        location: document.getElementById('editLocation').value,
        duration: document.getElementById('editDuration').value,
        startDate: document.getElementById('editStartDate').value,
        endDate: document.getElementById('editEndDate').value,
        description: document.getElementById('editDescription').value
    };
    
    // Validate dates
    if (new Date(formData.startDate) >= new Date(formData.endDate)) {
        showMessage('End date must be after start date!', false);
        return;
    }
    
    // Update listing
    listings[listingIndex] = { ...listings[listingIndex], ...formData };
    
    // Update table row
    const row = document.querySelector(`tr[data-id="${currentEditingId}"]`);
    if (row) {
        row.cells[0].textContent = formData.title;
        row.cells[1].textContent = formData.location;
        row.cells[2].textContent = formData.duration;
        row.cells[3].textContent = formatDate(formData.startDate);
        row.cells[4].textContent = formatDate(formData.endDate);
    }
    
    closeModal();
    showMessage('Listing updated successfully!');
});

// Close modal when clicking outside
window.onclick = function(event) {
    const modal = document.getElementById('editModal');
    if (event.target === modal) {
        closeModal();
    }
}

// Add some CSS for status styling
const style = document.createElement('style');
style.textContent = `
.status {
    background: rgba(34, 197, 94, 0.2);
    color: #22c55e;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.875rem;
    font-weight: 600;
    border: 1px solid rgba(34, 197, 94, 0.3);
}
`;
document.head.appendChild(style);
</script>

</body>
</html>