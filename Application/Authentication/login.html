<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/static/css/index.css">
        <title>Login - Internship Portal</title>
        <link rel="icon" type="image/x-icon" href="/static/images/title.png">
    </head>
    <body>
        <div class="container form-container">
            <!-- SVG for the Background flowing with Aurora based colors -->
            <svg class="bg-svg" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
                <path fill="url(#aurora-gradient)" d="M0,128L60,138.7C120,149,240,171,360,154.7C480,139,600,85,720,96C840,107,960,181,1080,197.3C1200,213,1320,171,1380,149.3L1440,128L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"></path>
                <defs>
                    <linearGradient id="aurora-gradient" x1="0" y1="0" x2="1" y2="1">
                        <stop offset="0%" stop-color="#4f46e5"/>
                        <stop offset="50%" stop-color="#06b6d4"/>
                        <stop offset="100%" stop-color="#8b5cf6"/>
                    </linearGradient>
                </defs>
            </svg>

            <form id="login-form" class="register-form" action="./process_login.php" method="post">
                <!-- Heading for our form -->
                <h2 class="form-heading">Sign In</h2>
                
                <!-- Subtitle -->
                <p style="text-align: center; color: rgba(255, 255, 255, 0.8); margin-bottom: calc(var(--spacing) * 6); font-size: 1.1rem;">
                    Welcome back to the Internship Portal
                </p>

                <!-- User Type Selection -->
                <div class="input-group">
                    <div class="input-container">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="input-icon">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="m22 21-3-3"/>
                            <circle cx="17" cy="17" r="3"/>
                        </svg>
                        <select name="user_type" class="form-input" required>
                            <option value="">Select Account Type</option>
                            <option value="student">Student</option>
                            <option value="employer">Employer</option>
                            <option value="admin">Administrator</option>
                        </select>
                    </div>
                </div>

                <!-- Email Input -->
                <div class="input-group">
                    <div class="input-container">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="input-icon">
                            <rect width="20" height="16" x="2" y="4" rx="2"/>
                            <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                        </svg>
                        <input 
                            type="email" 
                            placeholder="Email Address"
                            name="email" 
                            class="form-input"
                            required />
                    </div>
                </div>

                <!-- Password Input -->
                <div class="input-group">
                    <div class="input-container">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="input-icon">
                            <path d="M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"/>
                            <circle cx="16.5" cy="7.5" r=".5" fill="currentColor"/>
                        </svg>
                        <input 
                            type="password" 
                            placeholder="Password"
                            name="password" 
                            class="form-input"
                            required />
                    </div>
                </div>

                <!-- Remember Me and Forgot Password -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: calc(var(--spacing) * 4);">
                    <label style="display: flex; align-items: center; color: rgba(255, 255, 255, 0.9); font-size: 0.9rem; cursor: pointer;">
                        <input 
                            type="checkbox" 
                            name="remember_me" 
                            style="margin-right: calc(var(--spacing) * 2); accent-color: var(--color-cyan-500);">
                        Remember me
                    </label>
                    <a href="forgot_password.html" class="form-switch-link" style="font-size: 0.9rem; margin: 0;">
                        Forgot Password?
                    </a>
                </div>

                <!-- Login button -->
                <div class="button-container">
                    <button type="submit" class="submit-btn">Sign In</button>
                </div>

                <!-- Divider -->
                <div style="text-align: center; margin: calc(var(--spacing) * 6) 0 calc(var(--spacing) * 4) 0; position: relative;">
                    <span style="background: linear-gradient(to bottom right, var(--color-blue-900), var(--color-indigo-800), var(--color-purple-900)); padding: 0 1rem; color: rgba(255, 255, 255, 0.7); font-size: 0.9rem;">
                        Don't have an account?
                    </span>
                    <div style="position: absolute; top: 50%; left: 0; right: 0; height: 1px; background: rgba(255, 255, 255, 0.2); z-index: -1;"></div>
                </div>

                <!-- Registration Links -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: calc(var(--spacing) * 3); margin-top: calc(var(--spacing) * 4);">
                    <a href="student_register.html" class="btn" style="text-align: center; text-decoration: none; margin: 0; padding: calc(var(--spacing) * 3); background-color: rgba(59, 130, 246, 0.3); border: 1px solid rgba(59, 130, 246, 0.5);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        Student Sign Up
                    </a>
                    <a href="employer_register.html" class="btn" style="text-align: center; text-decoration: none; margin: 0; padding: calc(var(--spacing) * 3); background-color: rgba(168, 85, 247, 0.3); border: 1px solid rgba(168, 85, 247, 0.5);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 21h18"/>
                            <path d="M5 21V7l8-4v18"/>
                            <path d="M19 21V11l-6-4"/>
                        </svg>
                        Employer Sign Up
                    </a>
                </div>

                <!-- Error message -->
                <div id="login-error" class="error-message" hidden>
                    ‚ùå Invalid credentials. Please check your email, password, and account type.
                </div>
            </form>
        </div>

        <footer>
            Intern Connect  &copy; 2025
        </footer>

        <!-- JavaScript for form validation and UX -->
        <script>
            document.getElementById('login-form').addEventListener('submit', function(e) {
                const userType = document.querySelector('select[name="user_type"]').value;
                const email = document.querySelector('input[name="email"]').value;
                const password = document.querySelector('input[name="password"]').value;
                
                const loginError = document.getElementById('login-error');
                
                // Reset error display
                loginError.style.display = "none";

                // Basic validation
                if (!userType || !email || !password) {
                    e.preventDefault();
                    loginError.textContent = "‚ö†Ô∏è Please fill in all required fields.";
                    loginError.style.display = "block";
                    
                    setTimeout(() => {
                        loginError.style.display = "none";
                    }, 5000);
                    return;
                }

                // Email domain validation for students
                if (userType === 'student' && !email.endsWith('@strathmore.edu')) {
                    e.preventDefault();
                    loginError.textContent = "üéì Students must use their Strathmore University email address (@strathmore.edu).";
                    loginError.style.display = "block";
                    
                    setTimeout(() => {
                        loginError.style.display = "none";
                    }, 5000);
                    return;
                }
            });

            // Real-time validation for student email
            document.querySelector('input[name="email"]').addEventListener('input', function(e) {
                const email = e.target.value;
                const userType = document.querySelector('select[name="user_type"]').value;
                const loginError = document.getElementById('login-error');
                
                if (userType === 'student' && email && !email.endsWith('@strathmore.edu')) {
                    loginError.textContent = "üéì Students must use their Strathmore University email address.";
                    loginError.style.display = "block";
                } else {
                    loginError.style.display = "none";
                }
            });

            // Update email placeholder based on user type
            document.querySelector('select[name="user_type"]').addEventListener('change', function(e) {
                const userType = e.target.value;
                const emailInput = document.querySelector('input[name="email"]');
                const loginError = document.getElementById('login-error');
                
                loginError.style.display = "none";
                
                switch(userType) {
                    case 'student':
                        emailInput.placeholder = "Student Email (@strathmore.edu)";
                        break;
                    case 'employer':
                        emailInput.placeholder = "Company Email Address";
                        break;
                    case 'admin':
                        emailInput.placeholder = "Administrator Email";
                        break;
                    default:
                        emailInput.placeholder = "Email Address";
                }
            });

            // Style select dropdowns to match other inputs
            document.addEventListener('DOMContentLoaded', function() {
                const selects = document.querySelectorAll('select.form-input');
                selects.forEach(select => {
                    select.style.appearance = 'none';
                    select.style.backgroundImage = `url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e")`;
                    select.style.backgroundRepeat = 'no-repeat';
                    select.style.backgroundPosition = 'right 12px center';
                    select.style.backgroundSize = '16px';
                    select.style.paddingRight = 'calc(var(--spacing) * 10)';
                });

                // Add loading state to submit button
                const form = document.getElementById('login-form');
                const submitBtn = form.querySelector('.submit-btn');
                
                form.addEventListener('submit', function() {
                    submitBtn.innerHTML = `
                        <svg style="animation: spin 1s linear infinite; display: inline-block; margin-right: 0.5rem;" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12a9 9 0 11-6.219-8.56"/>
                        </svg>
                        Signing In...
                    `;
                    submitBtn.disabled = true;
                });
            });
        </script>

        <style>
            @keyframes spin {
                from { transform: rotate(0deg); }
                to { transform: rotate(360deg); }
            }
            
            /* Custom styles for login page */
            .register-form {
                max-width: 32rem;
            }
            
            input[type="checkbox"] {
                width: 1rem;
                height: 1rem;
                border-radius: 0.25rem;
            }
            
            /* Hover effects for registration buttons */
            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            }
            
            /* Grid button styling */
            .btn {
                transition: all 0.3s ease;
                font-weight: 600;
                border-radius: 0.75rem;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Responsive grid for mobile */
            @media (max-width: 640px) {
                .register-form {
                    max-width: 95%;
                }
                
                div[style*="grid-template-columns"] {
                    grid-template-columns: 1fr !important;
                    gap: calc(var(--spacing) * 2) !important;
                }
            }
        </style>
    </body>
</html>